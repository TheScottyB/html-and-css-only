<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1"
    />
    <title>Stormy Beach Sandbox â€“ Draggable Toys</title>
    <style>
      :root {
        --sky-top: #0c131a;
        --sky-mid: #141d27;
        --sky-low: #1a2530;
        --sea-deep: #0e2b39;
        --sand-1: #a4815b;
        --sand-2: #8f704e;
        --frame: #3a2b20;
        --toy-red: #e34b3d;
        --toy-blue: #1f7ad6;
        --toy-green: #24a35a;
        --toy-yellow: #f5c21a;
        --lightning: #d7e9ff;
      }
      html,
      body {
        height: 100%;
      }
      body {
        margin: 0;
        background: linear-gradient(180deg, var(--sky-top), var(--sky-mid) 55%, #0d0f13);
        color: #e8eff6;
        font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
        display: grid;
        place-items: center;
      }
      .scene {
        position: relative;
        width: min(92vw, 1100px);
        aspect-ratio: 16 / 10;
        border-radius: 16px;
        overflow: hidden;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.6), inset 0 0 120px rgba(0, 0, 0, 0.4);
        background: linear-gradient(180deg, var(--sky-top) 0%, var(--sky-mid) 45%, var(--sky-low) 58%, #0c0f13 59%);
        touch-action: none; /* allow dragging on touch */
      }
      .clouds {
        position: absolute;
        inset: 0 0 44% 0;
        background: radial-gradient(60% 80% at 30% 30%, rgba(255, 255, 255, 0.12), transparent 60%),
          radial-gradient(80% 70% at 70% 35%, rgba(255, 255, 255, 0.08), transparent 65%),
          radial-gradient(70% 100% at 50% 60%, rgba(255, 255, 255, 0.06), transparent 70%);
        mix-blend-mode: screen;
        opacity: 0.18;
        filter: blur(2px);
      }
      .sea {
        position: absolute;
        left: 0;
        right: 0;
        top: 55%;
        height: 22%;
        background: linear-gradient(180deg, #153746 0%, var(--sea-deep) 100%);
      }
      .horizon-glow {
        position: absolute;
        left: 0;
        right: 0;
        top: 54.5%;
        height: 1.2%;
        background: radial-gradient(120% 120% at 50% 0%, rgba(152, 210, 236, 0.6), rgba(152, 210, 236, 0) 60%);
        opacity: 0.45;
      }
      .waves {
        position: absolute;
        inset: 0;
        background-image: repeating-linear-gradient(0deg, transparent 0 10px, rgba(255, 255, 255, 0.06) 10px 12px);
        opacity: 0.25;
      }
      .bolt {
        position: absolute;
        top: 6%;
        left: 50%;
        width: 2px;
        height: 49%;
        transform: translateX(-50%);
        background: linear-gradient(180deg, transparent 0%, var(--lightning) 10%, #ffffff 30%, var(--lightning) 55%, transparent 85%);
        filter: drop-shadow(0 0 6px #a7cfff) drop-shadow(0 0 18px #bfe3ff);
        clip-path: polygon(50% 0%, 60% 10%, 45% 22%, 58% 35%, 48% 46%, 62% 60%, 50% 72%, 65% 86%, 50% 100%, 40% 86%, 52% 72%, 38% 60%, 50% 46%, 36% 35%, 45% 22%, 40% 10%);
        animation: flicker 2.8s infinite steps(2, end);
        opacity: 0.95;
      }
      @keyframes flicker {
        0%,
        8%,
        100% {
          opacity: 0;
        }
        9%,
        12% {
          opacity: 1;
        }
        13%,
        18% {
          opacity: 0.3;
        }
        19%,
        21% {
          opacity: 1;
        }
        22%,
        90% {
          opacity: 0;
        }
      }
      .beach {
        position: absolute;
        left: 0;
        right: 0;
        bottom: 0;
        height: 45%;
        background: linear-gradient(180deg, var(--sand-1) 0%, var(--sand-2) 60%, #5e4a35 100%);
      }
      .sand-texture {
        position: absolute;
        inset: 0;
        background-image: radial-gradient(1.2px 1.2px at 10% 20%, rgba(255, 255, 255, 0.14), transparent 60%),
          radial-gradient(1.2px 1.2px at 70% 40%, rgba(0, 0, 0, 0.16), transparent 60%),
          radial-gradient(1.2px 1.2px at 40% 75%, rgba(255, 255, 255, 0.1), transparent 60%);
        opacity: 0.5;
        mix-blend-mode: overlay;
      }

      /* Draggable toys anywhere in the scene */
      .toys-layer {
        position: absolute;
        inset: 0;
        pointer-events: none; /* children handle events */
      }
      .toy {
        position: absolute;
        transform: translate(-50%, -50%) rotate(var(--rot, 0deg));
        filter: drop-shadow(0 6px 8px rgba(0, 0, 0, 0.4));
        touch-action: none;
        cursor: grab;
        pointer-events: auto;
        transition: transform 0.12s ease, filter 0.12s ease;
      }
      .toy.dragging {
        cursor: grabbing;
        filter: drop-shadow(0 14px 22px rgba(0, 0, 0, 0.55));
        transform: translate(-50%, -50%) rotate(var(--rot, 0deg)) scale(1.06);
      }

      .caption {
        position: absolute;
        left: 16px;
        bottom: 16px;
        font-size: clamp(14px, 1.6vw, 18px);
        letter-spacing: 0.2px;
        color: #d6e4f5;
        opacity: 0.9;
        text-shadow: 0 2px 10px rgba(0, 0, 0, 0.6);
      }
      .cta {
        position: absolute;
        right: 16px;
        bottom: 16px;
        background: linear-gradient(180deg, #2d74c7, #1c56a0);
        color: #f1f6ff;
        border: 0;
        border-radius: 10px;
        padding: 10px 14px;
        font-weight: 600;
        cursor: pointer;
        box-shadow: 0 10px 24px rgba(0, 0, 0, 0.35), inset 0 1px 0 rgba(255, 255, 255, 0.25);
        transition: transform 0.15s ease, box-shadow 0.15s ease;
      }
      .cta:hover {
        transform: translateY(-2px);
        box-shadow: 0 14px 28px rgba(0, 0, 0, 0.45), inset 0 1px 0 rgba(255, 255, 255, 0.28);
      }
    </style>
  </head>
  <body>
    <div
      class="scene"
      id="scene"
      role="img"
      aria-label="Stormy beach with lightning striking the sea. Colorful sandbox toys can be dragged around."
    >
      <div class="clouds"></div>
      <div class="horizon-glow"></div>
      <div class="sea"><div class="waves"></div></div>
      <div class="bolt" aria-hidden="true"></div>
      <div class="beach"><div class="sand-texture"></div></div>

      <!-- Draggable toys layer -->
      <div class="toys-layer" id="toys">
        <!-- Shovel -->
        <svg
          class="toy"
          data-rot="-6"
          style="--rot: -6deg; left: 32%; top: 70%"
          width="110"
          height="70"
          viewBox="0 0 220 140"
          fill="none"
          aria-label="Red shovel"
        >
          <path
            d="M40 70c-18 16-22 30-18 38 6 10 22 12 38 0 16-12 40-32 48-40 6-6-8-20-14-14-8 8-34 24-54 16z"
            fill="var(--toy-red)"
          />
          <rect x="120" y="52" width="86" height="16" rx="8" fill="var(--toy-red)" />
          <rect
            x="192"
            y="44"
            width="28"
            height="32"
            rx="10"
            stroke="var(--toy-red)"
            stroke-width="10"
          />
        </svg>

        <!-- Rake -->
        <svg
          class="toy"
          data-rot="-12"
          style="--rot: -12deg; left: 46%; top: 60%"
          width="120"
          height="80"
          viewBox="0 0 240 160"
          fill="none"
          aria-label="Blue rake"
        >
          <rect x="20" y="70" width="150" height="18" rx="9" fill="var(--toy-blue)" />
          <g fill="var(--toy-blue)">
            <rect x="8" y="56" width="12" height="22" rx="5" />
            <rect x="8" y="80" width="12" height="22" rx="5" />
            <rect x="32" y="56" width="12" height="22" rx="5" />
            <rect x="32" y="80" width="12" height="22" rx="5" />
          </g>
          <rect
            x="166"
            y="62"
            width="60"
            height="34"
            rx="10"
            stroke="var(--toy-blue)"
            stroke-width="10"
          />
        </svg>

        <!-- Bucket -->
        <svg
          class="toy"
          data-rot="6"
          style="--rot: 6deg; left: 58%; top: 55%"
          width="92"
          height="92"
          viewBox="0 0 120 120"
          aria-label="Green bucket"
        >
          <defs>
            <linearGradient id="g" x1="0" y1="0" x2="0" y2="1">
              <stop offset="0" stop-color="#3cd67a" />
              <stop offset="1" stop-color="#1e7a47" />
            </linearGradient>
          </defs>
          <path
            d="M18 30h84l-10 70a12 12 0 0 1-12 10H40a12 12 0 0 1-12-10L18 30z"
            fill="url(#g)"
          />
          <path
            d="M32 26c0-14 12-22 28-22s28 8 28 22"
            stroke="#9debbf"
            stroke-width="8"
            stroke-linecap="round"
          />
        </svg>

        <!-- Star 1 -->
        <svg
          class="toy"
          data-rot="10"
          style="--rot: 10deg; left: 70%; top: 68%"
          width="78"
          height="78"
          viewBox="0 0 100 100"
          aria-label="Yellow star"
        >
          <path
            d="M50 6l12 26 28 4-20 19 5 28-25-13-25 13 5-28-20-19 28-4 12-26z"
            fill="var(--toy-yellow)"
          />
        </svg>

        <!-- Star 2 -->
        <svg
          class="toy"
          data-rot="18"
          style="--rot: 18deg; left: 52%; top: 75%"
          width="70"
          height="70"
          viewBox="0 0 100 100"
          aria-label="Blue star"
        >
          <path
            d="M50 6l12 26 28 4-20 19 5 28-25-13-25 13 5-28-20-19 28-4 12-26z"
            fill="var(--toy-blue)"
          />
        </svg>
      </div>

      <div class="caption">Drag the toys anywhere on the sand or screen.</div>
      <button
        class="cta"
        aria-label="Reset toy positions"
        id="resetBtn"
        type="button"
      >
        Reset Toys
      </button>
    </div>

    <script>
      (() => {
        const scene = document.getElementById("scene");
        const toys = Array.from(document.querySelectorAll(".toy"));
        const resetBtn = document.getElementById("resetBtn");

        // Store initial positions to reset later
        const initial = new Map();
        toys.forEach((el) => {
          initial.set(el, { left: el.style.left, top: el.style.top });
        });

        let active = null;
        let offsetX = 0;
        let offsetY = 0;

        // Helpers to get scene bounds and clamp positions
        const clamp = (v, min, max) => Math.max(min, Math.min(max, v));

        function pointerDown(e) {
          const el = e.currentTarget;
          active = el;
          active.classList.add("dragging");
          active.setPointerCapture(e.pointerId);

          // Convert to scene coordinate system
          const rect = scene.getBoundingClientRect();
          const elRect = active.getBoundingClientRect();
          const cx = elRect.left + elRect.width / 2;
          const cy = elRect.top + elRect.height / 2;

          offsetX = e.clientX - cx;
          offsetY = e.clientY - cy;
        }

        function pointerMove(e) {
          if (!active) return;

          const rect = scene.getBoundingClientRect();

          // Desired center
          let x = e.clientX - offsetX;
          let y = e.clientY - offsetY;

          // Constrain center inside the scene with a small margin
          const margin = 10;
          x = clamp(x, rect.left + margin, rect.right - margin);
          y = clamp(y, rect.top + margin, rect.bottom - margin);

          // Convert to percentage for responsiveness
          const leftPct = ((x - rect.left) / rect.width) * 100;
          const topPct = ((y - rect.top) / rect.height) * 100;

          active.style.left = leftPct.toFixed(2) + "%";
          active.style.top = topPct.toFixed(2) + "%";
        }

        function pointerUp(e) {
          if (!active) return;
          active.classList.remove("dragging");
          active.releasePointerCapture(e.pointerId);
          active = null;
        }

        toys.forEach((el) => {
          el.addEventListener("pointerdown", pointerDown);
          el.addEventListener("pointermove", pointerMove);
          el.addEventListener("pointerup", pointerUp);
          el.addEventListener("pointercancel", pointerUp);
          // Double-tap/click to spin a bit
          el.addEventListener("dblclick", () => nudgeRotation(el));
        });

        function nudgeRotation(el) {
          const cur = parseFloat(el.dataset.rot || "0");
          const next = cur + 20;
          el.dataset.rot = String(next);
          el.style.setProperty("--rot", next + "deg");
        }

        resetBtn.addEventListener("click", () => {
          toys.forEach((el) => {
            const pos = initial.get(el);
            el.style.left = pos.left;
            el.style.top = pos.top;
            el.dataset.rot = getComputedStyle(el)
              .getPropertyValue("--rot")
              .replace("deg", "")
              .trim();
          });
        });

        // Prevent default gestures on touch
        scene.addEventListener("touchmove", (e) => e.preventDefault(), {
          passive: false,
        });
      })();
    </script>
  </body>
</html>
